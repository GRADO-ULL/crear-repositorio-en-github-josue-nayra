0 info it worked if it ends with ok
1 verbose cli [ '/home/ubuntu/.nvm/versions/node/v4.5.0/bin/node',
1 verbose cli   '/home/ubuntu/.nvm/versions/node/v4.5.0/bin/npm',
1 verbose cli   'publish' ]
2 info using npm@2.15.9
3 info using node@v4.5.0
4 verbose publish [ '.' ]
5 silly cache add args [ '.', null ]
6 verbose cache add spec .
7 silly cache add parsed spec Result {
7 silly cache add   raw: '.',
7 silly cache add   scope: null,
7 silly cache add   name: null,
7 silly cache add   rawSpec: '.',
7 silly cache add   spec: '/home/ubuntu/workspace/P4_main/nueva-funcionalidad-para-el-paquete-npm-plugins-josue-nayra',
7 silly cache add   type: 'directory' }
8 verbose addLocalDirectory /home/ubuntu/.npm/gitbook-start-josue-nayra/1.6.0/package.tgz not in flight; packing
9 verbose correctMkdir /home/ubuntu/.npm correctMkdir not in flight; initializing
10 verbose tar pack [ '/home/ubuntu/.npm/gitbook-start-josue-nayra/1.6.0/package.tgz',
10 verbose tar pack   '/home/ubuntu/workspace/P4_main/nueva-funcionalidad-para-el-paquete-npm-plugins-josue-nayra' ]
11 verbose tarball /home/ubuntu/.npm/gitbook-start-josue-nayra/1.6.0/package.tgz
12 verbose folder /home/ubuntu/workspace/P4_main/nueva-funcionalidad-para-el-paquete-npm-plugins-josue-nayra
13 info prepublish gitbook-start-josue-nayra@1.6.0
14 verbose addLocalTarball adding from inside cache /home/ubuntu/.npm/gitbook-start-josue-nayra/1.6.0/package.tgz
15 verbose correctMkdir /home/ubuntu/.npm correctMkdir not in flight; initializing
16 silly cache afterAdd gitbook-start-josue-nayra@1.6.0
17 verbose afterAdd /home/ubuntu/.npm/gitbook-start-josue-nayra/1.6.0/package/package.json not in flight; writing
18 verbose correctMkdir /home/ubuntu/.npm correctMkdir not in flight; initializing
19 verbose afterAdd /home/ubuntu/.npm/gitbook-start-josue-nayra/1.6.0/package/package.json written
20 silly publish { name: 'gitbook-start-josue-nayra',
20 silly publish   version: '1.6.0',
20 silly publish   description: 'A package for building an initial gitbook structure',
20 silly publish   main: 'gitbook-start.js',
20 silly publish   bin: { 'gitbook-start': './bin/gitbook-start.js' },
20 silly publish   man: [ 'gitbook-start.1' ],
20 silly publish   scripts:
20 silly publish    { test: 'echo "Error: no test specified" && exit 1',
20 silly publish      start: 'node ./bin/gitbook-start.js' },
20 silly publish   repository:
20 silly publish    { type: 'git',
20 silly publish      url: 'git+https://github.com/ULL-ESIT-SYTW-1617/nueva-funcionalidad-para-el-paquete-npm-plugins-josue-nayra.git' },
20 silly publish   keywords: [ 'gitbook', 'initial', 'structure' ],
20 silly publish   author: '',
20 silly publish   contributors:
20 silly publish    [ { name: 'Josue Toledo',
20 silly publish        email: 'alu0100763492@ull.edu.es',
20 silly publish        url: 'www.github.com/JosueTC94' },
20 silly publish      { name: 'Nayra Rodriguez',
20 silly publish        email: 'alu0100406122@ull.edu.es',
20 silly publish        url: 'www.github.com/alu0100406122' } ],
20 silly publish   license: 'ISC',
20 silly publish   bugs: { url: 'https://github.com/ULL-ESIT-SYTW-1617/nueva-funcionalidad-para-el-paquete-npm-plugins-josue-nayra/issues' },
20 silly publish   homepage: 'https://github.com/ULL-ESIT-SYTW-1617/nueva-funcionalidad-para-el-paquete-npm-plugins-josue-nayra#readme',
20 silly publish   dependencies:
20 silly publish    { ejs: '^2.5.2',
20 silly publish      'fs-extra': '^0.30.0',
20 silly publish      'gh-pages': '^0.11.0',
20 silly publish      'git-config': '0.0.7',
20 silly publish      'gitbook-start-iaas-ull-es-josue-nayra': '^1.0.6',
20 silly publish      gulp: '^3.9.1',
20 silly publish      'gulp-git': '^1.11.3',
20 silly publish      'gulp-install': '^0.6.0',
20 silly publish      'gulp-run': '^1.7.1',
20 silly publish      'gulp-shell': '^0.5.2',
20 silly publish      minimist: '^1.2.0',
20 silly publish      'simple-git': '^1.54.0',
20 silly publish      'ssh-exec': '^2.0.0' },
20 silly publish   readme: '# Práctica 4. Sistemas y Tecnologías Web\n\n## Nueva funcionalidad para el paquete NPM: plugins (IAAS)\n\nEl objetivo de esta práctica es extender el package NodeJS desarrollado en la [pŕactica 2](https://github.com/ULL-ESIT-SYTW-1617/creacion-de-paquetes-y-modulos-en-nodejs-josue-nayra), publicado en npm con una nueva funcionalidad que permita que los usuarios con conocimientos de NodeJS puedan extender la conducta del ejecutable para que este realice el despliegue en plataformas distintas de las ya consideradas.\n\nEn esta práctica sólo se pide desarrollar el plugin para iaas.ull.es\n\n\n\n\n### Pasos a seguir para la utilización del plugin\n\n1- Descargar el paquete inicial: *gitbook-start*\n    \n```bash\n$ npm install -g gitbook-start-josue-nayra \n```\n\n2- Crear el libro mediante el comando:\n    \n```bash\n$ gitbook-start -d <directorio> --autor <autor> --name <nombre_libro> --url <url_repo>\n```\n    \n    Opciones disponibles para la creación del libro:\n        \n        -d o --directorio <directorio en el que se desplegará el libro>\n        \n        --autor <autor del libro>\n        \n        --name  <nombre del libro>\n        \n        --url <url del repositorio en github>\n    \n        --help \n        \n        --version\n\nSe construye así la estructura inicial por **gitbook-start**, es decir, la jerarquía de directorios conteniendo los scripts y ficheros markdown para el libro.\n\n3- Colocarse en la carpeta que contiene el libro.\n\n```bash\n$ cd <directorio en el que se ha desplegado el libro>\n```\n\n4- Instalar las dependencias necesarias mediante el comando:\n    \n```bash\n$ npm install \n```\n\n5- Instalar el plugin requerido como dependendecia con la opción --save, como por ejemplo: **gitbook-start-iaas-ull-es-josue-nayra** para el despliegue en iaas.\n    \n```bash\n$ npm install --save gitbook-start-iaas-ull-es-josue-nayra \n```\n\n6- Es necesario tener el repositorio remoto actualizado. Para ello podemos ejecutar una de las tareas descritas en el gulpfile: **gulp push --mensaje <mensaje commit>**.\n\n\n7- El usuario debe tener su máquina IAAS configurada. Para ello debe:\n\n* Haber copiado el fichero de clave pública \'id_rsa.pub\' de su máquina en el iaas para poder acceder a la misma sin necesidad de especificar usuario y contraseña cuando se realicen conexiones remotas. Para ello podemos ejecutar el siguiente comando\nen la máquina local:\n    \n```bash\n$ scp ~/.ssh/id_rsa.pub <máquina remota>:~/.ssh/\n```\n* En la máquina del IAAS, el usuario debe clonar el repositorio dónde se alojará el gitbook.\n\n\n8- Ejecutar el plugin:\n   \n```bash\n$ gitbook-start --deploy iaas-ull-es --IP <ip> --path <ruta_maquina> --usuarioremoto <usuario_maquina_iaas>  \n```\n\n   Opciones disponibles:\n        --deploy <maquina donde se va a desplegar el gitbook>\n        --IP <ip de la máquina>\n        --usuarioremoto <usuario de la máquina>\n\n\nNOTA: El despliegue en el IAAS se realizará por defecto en el puerto 8080. En el caso que quiera cambiarse hay que acceder al fichero app.js y modificarlo.\n\n\n\n### Tareas Gulp\n\n\n* **push**\n\nTarea habilitada para que el usuario pueda actualizar el repositorio que contiene el gitbook. Está disponible una opción --mensaje para especificar el mensaje del commit.\n\n```bash\n$ gulp push --mensaje <mensaje del commit>\n```\n\n* **instalar_recursos**\n\nTarea que permite al usuario instalar plugins y dependencias necesarias para su gitbook.\n\n```bash\n& gulp instalar_recursos\n```\n\n* **deploy**\n\nTarea deploy genérica que actualiza las gh-pages del gitbook.\n```\n$ gulp deploy\n```\n\n* **deploy --<despliegue realizado>**\n\nTarea generada posteriormente a la realización y ejecución del comando gitbook-start --deploy, que permite al usuario realizar posteriores despliegues y actualizaciones de su gitbook em la máquina remota con gulp.\nPor ejemplo, en el caso de que el usuario despliegue en el IAAS, después de haber desplegado con la opción gitbook-start --deploy iaas-ull-es, en el gulpfile se generará una tarea\ncon el nombre deploy-iaas-ull-es.\n\n```\n$ gulp deploy-<máquina en la se ha desplegado previamente>\n```\n\n\n### Enlaces\n\n- [Campus virtual](https://campusvirtual.ull.es/1617/course/view.php?id=1175)\n\n- [Descripción de la práctica](https://casianorodriguezleon.gitbooks.io/ull-esit-1617/content/practicas/practicaplugin.html)\n\n- [Publicación del paquete en npm](https://www.npmjs.com/package/gitbook-start-josue-nayra)\n\n- [Repositorio en Github.com](https://github.com/ULL-ESIT-SYTW-1617/nueva-funcionalidad-para-el-paquete-npm-plugins-josue-nayra)\n\n- [Plugin para el despliegue en IAAS](https://www.npmjs.com/package/gitbook-start-iaas-ull-es-josue-nayra)\n\n- [Repositorio del plugin iaas-ull-es](https://github.com/ULL-ESIT-SYTW-1617/gitbook-start-iaas-ull-es-josue-nayra) \n\n\n\n\n### Referencias\n\n- [Tutorial para publicar paquetes nodejs](https://casianorodriguezleon.gitbooks.io/ull-esit-1617/content/apuntes/nodejspackages.html)\n\n- [Gulp](https://casianorodriguezleon.gitbooks.io/ull-esit-1617/content/apuntes/gulp/)\n\n- [Uso de templates](https://www.npmjs.com/package/ejs)\n\n- [Fyle System de Nodejs para el manejo de archivos](https://casianorodriguezleon.gitbooks.io/ull-esit-1617/content/apuntes/fs.html)\n\n- [Construyendo package.json](https://docs.npmjs.com/files/package.json)\n\n\n\n### Integrantes\n\n- Josué Toledo Castro\n    [Github personal](www.github.com/JosueTC94)\n- María Nayra Rodríguez Pérez\n    [Github personal](www.github.com/alu0100406122)',
20 silly publish   readmeFilename: 'README.md',
20 silly publish   gitHead: '13efd675c7a8e54a6650c2c7b78b5c62dcdbe71a',
20 silly publish   _id: 'gitbook-start-josue-nayra@1.6.0',
20 silly publish   _shasum: '6226f281ad7d902c4ee445b7f30b55653f2050bb',
20 silly publish   _from: '.' }
21 verbose getPublishConfig undefined
22 silly mapToRegistry name gitbook-start-josue-nayra
23 silly mapToRegistry using default registry
24 silly mapToRegistry registry https://registry.npmjs.org/
25 silly mapToRegistry data Result {
25 silly mapToRegistry   raw: 'gitbook-start-josue-nayra',
25 silly mapToRegistry   scope: null,
25 silly mapToRegistry   name: 'gitbook-start-josue-nayra',
25 silly mapToRegistry   rawSpec: '',
25 silly mapToRegistry   spec: 'latest',
25 silly mapToRegistry   type: 'tag' }
26 silly mapToRegistry uri https://registry.npmjs.org/gitbook-start-josue-nayra
27 verbose publish registryBase https://registry.npmjs.org/
28 silly publish uploading /home/ubuntu/.npm/gitbook-start-josue-nayra/1.6.0/package.tgz
29 verbose request uri https://registry.npmjs.org/gitbook-start-josue-nayra
30 verbose request sending authorization for write operation
31 info attempt registry request try #1 at 9:51:34 AM
32 verbose request using bearer token for auth
33 verbose request id 3121af34219986d4
34 http request PUT https://registry.npmjs.org/gitbook-start-josue-nayra
35 http 403 https://registry.npmjs.org/gitbook-start-josue-nayra
36 verbose headers { 'content-type': 'application/json',
36 verbose headers   'cache-control': 'max-age=300',
36 verbose headers   'content-length': '95',
36 verbose headers   'accept-ranges': 'bytes',
36 verbose headers   date: 'Fri, 21 Oct 2016 09:51:36 GMT',
36 verbose headers   via: '1.1 varnish',
36 verbose headers   connection: 'keep-alive',
36 verbose headers   'x-served-by': 'cache-lcy1121-LCY',
36 verbose headers   'x-cache': 'MISS',
36 verbose headers   'x-cache-hits': '0',
36 verbose headers   'x-timer': 'S1477043494.766424,VS0,VE1277',
36 verbose headers   vary: 'Accept-Encoding' }
37 verbose request invalidating /home/ubuntu/.npm/registry.npmjs.org/gitbook-start-josue-nayra on PUT
38 error publish Failed PUT 403
39 verbose stack Error: "You cannot publish over the previously published version 1.6.0." : gitbook-start-josue-nayra
39 verbose stack     at makeError (/home/ubuntu/.nvm/versions/node/v4.5.0/lib/node_modules/npm/node_modules/npm-registry-client/lib/request.js:264:12)
39 verbose stack     at CachingRegistryClient.<anonymous> (/home/ubuntu/.nvm/versions/node/v4.5.0/lib/node_modules/npm/node_modules/npm-registry-client/lib/request.js:252:14)
39 verbose stack     at Request._callback (/home/ubuntu/.nvm/versions/node/v4.5.0/lib/node_modules/npm/node_modules/npm-registry-client/lib/request.js:172:14)
39 verbose stack     at Request.self.callback (/home/ubuntu/.nvm/versions/node/v4.5.0/lib/node_modules/npm/node_modules/request/request.js:200:22)
39 verbose stack     at emitTwo (events.js:87:13)
39 verbose stack     at Request.emit (events.js:172:7)
39 verbose stack     at Request.<anonymous> (/home/ubuntu/.nvm/versions/node/v4.5.0/lib/node_modules/npm/node_modules/request/request.js:1067:10)
39 verbose stack     at emitOne (events.js:82:20)
39 verbose stack     at Request.emit (events.js:169:7)
39 verbose stack     at IncomingMessage.<anonymous> (/home/ubuntu/.nvm/versions/node/v4.5.0/lib/node_modules/npm/node_modules/request/request.js:988:12)
40 verbose statusCode 403
41 verbose pkgid gitbook-start-josue-nayra
42 verbose cwd /home/ubuntu/workspace/P4_main/nueva-funcionalidad-para-el-paquete-npm-plugins-josue-nayra
43 error Linux 4.2.0-c9
44 error argv "/home/ubuntu/.nvm/versions/node/v4.5.0/bin/node" "/home/ubuntu/.nvm/versions/node/v4.5.0/bin/npm" "publish"
45 error node v4.5.0
46 error npm  v2.15.9
47 error code E403
48 error "You cannot publish over the previously published version 1.6.0." : gitbook-start-josue-nayra
49 error If you need help, you may report this error at:
49 error     <https://github.com/npm/npm/issues>
50 verbose exit [ 1, true ]
